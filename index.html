
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Last War Virus Resistance Calculator</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      max-width: 600px;
      margin: auto;
    }
    .flag-row {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .flag-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      font-size: 0.9rem;
      border: none;
      background: none;
    }
    .flag-btn img {
      width: 30px;
      height: 20px;
      margin-bottom: 0.25rem;
    }
    input, button {
      padding: 0.5rem;
      font-size: 1rem;
      margin-top: 0.25rem;
      width: 100%;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="flag-row">
    <button class="flag-btn" onclick="changeLang('en')">
      <img src="https://flagcdn.com/w40/us.png" alt="English" />English
    </button>
    <button class="flag-btn" onclick="changeLang('es')">
      <img src="https://flagcdn.com/w40/es.png" alt="Español" />Español
    </button>
    <button class="flag-btn" onclick="changeLang('ko')">
      <img src="https://flagcdn.com/w40/kr.png" alt="한국어" />한국어
    </button>
    <button class="flag-btn" onclick="changeLang('pt')">
      <img src="https://flagcdn.com/w40/br.png" alt="Português" />Português
    </button>
  </div>

  <h2 id="title">Virus Resistance Calculator</h2>
  <label id="req-label">Required Resistance:</label>
  <input type="number" id="required" />
  <label id="cur-label">Current Resistance:</label>
  <input type="number" id="current" />
  <label id="mob-label">Mob Power (optional):</label>
  <input type="number" id="mobPower" />
  <button onclick="calculate()" id="calc-btn">Calculate</button>
  <p id="result"></p>

  <script>
    const langMap = {
      en: {
        title: "Virus Resistance Calculator",
        req: "Required Resistance:",
        cur: "Current Resistance:",
        mob: "Mob Power (optional):",
        calc: "Calculate",
        res: "Result:"
      },
      es: {
        title: "Calculadora de Resistencia al Virus",
        req: "Resistencia Requerida:",
        cur: "Resistencia Actual:",
        mob: "Poder del Enemigo (opcional):",
        calc: "Calcular",
        res: "Resultado:"
      },
      ko: {
        title: "바이러스 저항 계산기",
        req: "요구 저항력:",
        cur: "현재 저항력:",
        mob: "몹 파워 (선택):",
        calc: "계산하기",
        res: "결과:"
      },
      pt: {
        title: "Calculadora de Resistência ao Vírus",
        req: "Resistência Necessária:",
        cur: "Resistência Atual:",
        mob: "Poder do Inimigo (opcional):",
        calc: "Calcular",
        res: "Resultado:"
      }
    };

    function changeLang(lang) {
      document.getElementById("title").textContent = langMap[lang].title;
      document.getElementById("req-label").textContent = langMap[lang].req;
      document.getElementById("cur-label").textContent = langMap[lang].cur;
      document.getElementById("mob-label").textContent = langMap[lang].mob;
      document.getElementById("calc-btn").textContent = langMap[lang].calc;
    }

    function calculate() {
      const req = parseFloat(document.getElementById("required").value);
      const cur = parseFloat(document.getElementById("current").value);
      const mob = parseFloat(document.getElementById("mobPower").value || 0);
      const result = document.getElementById("result");

      const missing = req - cur;
      const percent = Math.ceil((missing / req) * 100);
      let dmg = 100 - 2 * percent;
      let multiplier = 0;

      if (dmg <= 0) {
        dmg = Math.max((dmg / 20) + 1, 0.1);
        multiplier = dmg;
        dmg = `${(multiplier * 100).toFixed(1)}%`;
      } else {
        multiplier = dmg / 100;
        dmg = `${dmg}%`;
      }

      let output = `You will deal ${dmg} damage.`;
      if (mob > 0) {
        output += `
You need at least ${(mob / multiplier).toFixed(0)} power to beat the mob.`;
      }

      result.textContent = output;
    }
  </script>
</body>
</html>
